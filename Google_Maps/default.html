<?php

require_once 'Net/URL.php';
require_once 'Google/Maps.php';

unset($params);

$params['size']    = '512x300';
$params['zoom']    = 13;
//$params['center']  = new Google_Maps_Coordinate('58.378700', '26.731110');

$marker_1 = new Google_Maps_Marker(new Google_Maps_Coordinate('58.378700', '26.731110'));
$marker_2 = new Google_Maps_Marker(new Google_Maps_Coordinate('58.368488', '26.768908'));
$marker_3 = new Google_Maps_Marker(new Google_Maps_Coordinate('58.268488', '26.768908'));
$marker_4 = new Google_Maps_Marker(new Google_Maps_Coordinate('58.379646', '26.764090'));

$marker_1->setColor('green');
$marker_2->setColor('blue');
$marker_3->setColor('orange');

$params['markers'] = array($marker_1, $marker_2, $marker_3, $marker_4);
$params['key']     = trim(file_get_contents('api_key.txt'));

$map = Google_Maps::create('static', $params);
//$map->showMarkerBounds();
                           
$map_bounds = $map->getBounds();
//$map->setPath($map_bounds->getBoundsPath());

$map->zoomToFit();

?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <title>Clickable Markers in Google Static Map Demo</title>
  <meta name="generator" content="Mephisto" />
  <link href="http://www.appelsiini.net/stylesheets/main2.css" rel="stylesheet" type="text/css" />
  <link href="css/styles.css" rel="stylesheet" type="text/css" />
  <link href="css/bubble.css" rel="stylesheet" type="text/css" />
  <style type="text/css">
    img { behavior: url(css/iepngfix.htc) }         
  </style>
  <link rel="alternate" type="application/atom+xml" href="http://feeds.feedburner.com/tuupola" title="Atom feed" />
</head>

<body>
  <div id="wrap"> 
    <div id="header">
      <p>
        <h1>Clickable Markers in Static Map</h1><br />
        <small>How to use imagemap to create clickable markers with Google Static Map API.</small>
        <ul id="nav">
          <li id="first"><a href="/" class="active">weblog</a></li>
          <li><a href="/projects" class="last">projects</a></li>
          <!--
          <li><a href="/cv" class="last">cv</a></li>
        -->
        </ul>
      </p>
    </div>
    <div id="content">

    <div id="map" style="width:512px; height:300px">
      <?php /* print $imagemap */ ?>
      <img src="<?php print $map ?>" usemap="#marker_map" />
    </div>
  
    <!-- Infobubble -->
    <div id="bubble" style="position: absolute; left: 10px; top: 20px; display: none;">  
  
      <div class="bubble-top-left">
        <img class="bubble-top-left" src="http://maps.google.com/intl/en_ALL/mapfiles/iw2.png" />
      </div>

      <div class="bubble-top-right">
        <img class="bubble-top-right" src="http://maps.google.com/intl/en_ALL/mapfiles/iw2.png" />

      </div>

      <div class="bubble-pointer">
        <img class="bubble-pointer" src="http://maps.google.com/intl/en_ALL/mapfiles/iw2.png" />
      </div>

      <div class="bubble-bottom-left">
        <img class="bubble-bottom-left" src="http://maps.google.com/intl/en_ALL/mapfiles/iw2.png" />
      </div>

      <div class="bubble-bottom-right">
        <img class="bubble-bottom-right" src="http://maps.google.com/intl/en_ALL/mapfiles/iw2.png" />
      </div>

      <div class="bubble-border-top"></div>
      <div class="bubble-border-left-right"></div>
      <div class="bubble-border-bottom"></div>

      <p class="bubble-close">
        <img class="bubble-close" src="http://maps.google.com/intl/en_ALL/mapfiles/iw_close.gif" />
      </p>

      <div id="content_0" class="bubble-content">
        <img src="img/thumb_1.jpg" />
        These infowindows use HTML taken from Google Maps itself. Structure and CSS was spied using FireBug.
      </div>
      <div id="content_1" class="bubble-content">
        <img src="img/thumb_2.jpg" />
        This demo still uses JavaScript to position and show the infowindow. Map itself is static image.
      </div>
      <div id="content_2" class="bubble-content">
        <img src="img/thumb_3.jpg" />
        Static maps with JavaScript infowindows are handy if you need only small map but still need to display info.
      </div>
    </div>
    <!-- /Infobubble -->
      
     <div class="entry">
       <p>
         Map above uses <a href="http://code.google.com/apis/maps/documentation/staticmaps/">Google Static Maps API</a>. Green markers are made clickable by using generated imagemap. 
       </p> 
       <p>
         See how it was done by reading tutorials <a href="http://www.appelsiini.net/2008/6/clickable-markers-with-google-static-maps">part 1</a> 
         and <a href="http://www.appelsiini.net/2008/9/infowindows-with-google-static-maps">part 2</a>.
       </p>
      </div>
    </div>
    <div id="sidebar">
      <!--
        <h3>Here be the dragons...</h3>
      -->
    </div>
  
  <div id="footer">
  </div>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.2.6/jquery.min.js" type="text/javascript" charset="utf-8"></script>

<script type="text/javascript" charset="utf-8">
$(function() {
    /* window.loadFirebugConsole(); */
    /*    
    $('#map > img').bind('mousemove', function(event) {
      var x = event.pageX - $(this).offset().left;
      var y = event.pageY - $(this).offset().top;
      console.log(x + ":" + y);
    });
    */
});
</script>

<!-- Statistics. Not relate to Google Maps. -->
<script src="/mint/?js" type="text/javascript"></script>
<script src="http://www.google-analytics.com/urchin.js" type="text/javascript"></script>
  <script type="text/javascript">
  _uacct = "UA-190966-1";
  //urchinTracker();
</script>


</body>
</html>
